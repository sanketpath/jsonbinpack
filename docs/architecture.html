<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="referrer" content="no-referrer">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>JSON BinPack</title>
    <link rel="canonical" href="https://www.jsonbinpack.org">
    <meta name="description" content="A space-efficient open-source binary JSON serialization format based on JSON Schema">
    <meta property="og:title" content="JSON BinPack">
    <meta property="og:url" content="https://www.jsonbinpack.org">
    <meta property="og:description" content="A space-efficient open-source binary JSON serialization format based on JSON Schema">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="A space-efficient open-source binary JSON serialization format based on JSON Schema">

    <link rel="icon" href="https://www.jsonbinpack.org/favicon.ico" sizes="any">
    <link rel="icon" href="https://www.jsonbinpack.org/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="https://www.jsonbinpack.org/apple-touch-icon.png">
    <link rel="manifest" href="https://www.jsonbinpack.org/manifest.webmanifest">

    <link rel="stylesheet" href="https://www.jsonbinpack.org/assets/css/main.css" type="text/css">

    <script defer data-domain="jsonbinpack.org" src="https://plausible.io/js/script.outbound-links.js"></script>
<script>
  window.plausible = window.plausible || function() {
    (window.plausible.q = window.plausible.q || []).push(arguments);
  };
</script>


  </head>
  <body>
    <div id="backdrop" class="modal-backdrop fade visually-hidden"></div>

<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvas" aria-labelledby="offcanvas-label">
  <div class="offcanvas-header pb-0">
    <a class="offcanvas-title flex-grow-1 fs-5 text-reset text-decoration-none" href="https://www.jsonbinpack.org">
      <img src="https://www.jsonbinpack.org/icon.svg" alt=" logo" width="50" height="50">
      <span class="text-dark align-middle">JSON BinPack</span>
    </a>

    <button id="offcanvas-close" type="button" class="btn-close text-reset" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <hr class="mt-0">

    <ul class="nav nav-pills flex-column mb-auto small">
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/jviotti/jsonbinpack/discussions">Discussions</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/docs/architecture">Docs</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/jviotti/jsonbinpack/issues">Issues</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://twitter.com/sourcemeta">Twitter</a>
      </li>
    </ul>

    <hr>

    <ul class="nav nav-pills flex-column mb-auto small">
      
        <li class="nav-item">
        
        <a href="/docs/architecture" class="nav-link active" aria-current="page">The Architecture of JSON BinPack</a>
        
        </li>
      

      <li class="nav-item">
        <a class="nav-link disabled" href="#">More documentation coming soon!</a>
      </li>
    </ul>
  </div>
</div>

<nav class="navbar navbar-expand navbar-light bg-light border-bottom">
  
  <div class="container-fluid px-3 px-lg-5">
  

    
    <button id="offcanvas-toggle" type="button" class="btn btn-lg btn-outline-light me-1 d-lg-none">
      <span class="navbar-toggler-icon"></span>
    </button>
    

    
    <a class="navbar-brand flex-grow-1 fs-3 d-none d-lg-inline-block" href="https://www.jsonbinpack.org">
    
      <img src="https://www.jsonbinpack.org/icon.svg" alt=" logo" width="50" height="50">
      
      <span class="align-middle d-none d-md-inline-block">
      JSON BinPack
      </span>
      
    </a>
    <div class="navbar-collapse flex-grow-0">
      <div class="navbar-nav align-items-center">
        <a class="nav-link ms-2 d-none d-md-inline-block" href="https://github.com/jviotti/jsonbinpack/discussions">Discussions</a>
        <a class="nav-link ms-2 d-none d-md-inline-block" href="/docs/architecture">Docs</a>
        <a class="nav-link ms-2 d-none d-md-inline-block" href="https://github.com/jviotti/jsonbinpack/issues">Issues</a>

        <a class="nav-link ms-2" href="https://twitter.com/sourcemeta">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-twitter" viewBox="0 0 16 16">
            <path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"/>
          </svg>
        </a>

        <a class="nav-link ms-2" href="https://github.com/jviotti/jsonbinpack">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
          </svg>
        </a>
      </div>
    </div>
  </div>
</nav>


<div class="container-fluid my-4 my-md-5 px-lg-5">
  <div class="row gx-0">
    <aside class="sidebar col d-none d-lg-block">
      <ul class="nav nav-pills flex-column mb-auto small mt-2">
        
          <li class="nav-item">
          
          <a href="/docs/architecture" class="nav-link active" aria-current="page">The Architecture of JSON BinPack</a>
          
          </li>
        

        <li class="nav-item">
          <a class="nav-link disabled" href="#">More documentation coming soon!</a>
        </li>
      </ul>
    </aside>
    <main class="col">
      <article class="px-3 px-lg-5">
        <header class="mb-4">
          <h1 class="fw-bold">The Architecture of JSON BinPack</h1>
          <hr>
        </header>

        <p>JSON BinPack consists of three software modules: the Canonicalizer, the Encoder
and the Mapper.</p>

<p><img src="https://www.jsonbinpack.org/assets/images/c4-jsonbinpack-container.png" alt="JSON BinPack C4 Container Diagram" /></p>

<p>The core goal of JSON BinPack is to <strong>unambiguously and bi-directionally map
the high-level data types provided by JSON and JSON Schema to low-level
space-efficient counterparts</strong>.</p>

<p>In order to provide these mappings, JSON BinPack statically analyses the input
JSON Schema definition to derive encoding and decoding rules. We may think of
this process as a <em>schema refinement</em> phase that takes a high-level schema
definition that describes an abstract data type and augments it to produce a
new schema definition, referred to as the <em>encoding schema</em>, that more
precisely describes how to represent such abstract data type as a bit-string.
The presence of an encoding schema definition for the input data is not enough
by itself to perform serialization and deserialization. To complement schema
refinement, we introduce an <em>encoder</em> phase that makes use of an encoding
schema definition to guide the serialization and deserialization processes.</p>

<p>In terms of the phases introduced in this section, the schema refinement phase
is concerned with the high-level schema definition while the encoder is
concerned with the input data instance and the encoding schema definition.
Schema-driven serialization specifications typically exploit this separation of
concerns to optimize for runtime-efficiency by performing the phases that do
not involve the input data at build time. Given the expressiveness of JSON
Schema, the JSON BinPack schema refinement phase is computationally-expensive
yet crucial to achieve space-efficiency.  JSON BinPack exploits this separation
of concerns by allocating unbounded build time resources to the schema
refinement phase and its static analysis process to derive space-efficient
encoding rules.  The schema-refinement phase is performed once per schema
rather than once per input data instance, reducing the amount of computation
required to serialize and deserialize multiple input data instances described
by the same schema definition to a minimum.</p>

<h2 id="canonicalizer">Canonicalizer</h2>

<p>JSON Schema is a particularly expressive and complex schema language. To
mitigate such complexity in the context of static analysis, the <em>Canonicalizer</em>
component is a total function that maps JSON Schema definitions to equivalent
but simpler JSON Schema definitions according to a set formal transformations.
The concept of simplifying JSON Schema definitions based on formal
transformations for static analysis purposes was originally introduced by <a href="https://arxiv.org/abs/1911.12651">Type
Safety with JSON Subschema</a>.  We extend their
work by modernizing and extending their set of canonicalization rules.</p>

<p><img src="https://www.jsonbinpack.org/assets/images/c4-jsonbinpack-canonicalizer.png" alt="JSON BinPack C4 Canonicalizer Diagram" /></p>

<p>The canonicalizer repeatedly applies the set of defined canonizalization
transformations rules to every subschema of a given JSON Schema definition
until no more transformations are possible. A JSON Schema definition that
cannot be further modified by any canonizalization rule is considered to be a
<em>Canonical JSON Schema</em>. In order to prevent an infinite loop in the
canonizalization algorithm, canonizalization rules do not conflict with each
other and the pre-condition of a given canonizalization rule does not hold
after such canonizalization rule has been applied to the schema.</p>

<h2 id="encoder">Encoder</h2>

<p>JSON BinPack implements a diverse set of encodings that are space-efficient in
different scenarios. The <em>Encoder</em> component consists of a set of parameterized
serialization and deserialization procedures targetting data types given
different sets of contrains.  The set of serialization and deserialization
procedures defined in the <em>Encoder</em> component are bounded by the JSON
\cite{ECMA-404} data model. However, the set of serialization and
deserialization procedures are agnostic to the schema language used to validate
and describe the input data.</p>

<p><img src="https://www.jsonbinpack.org/assets/images/c4-jsonbinpack-encoder.png" alt="JSON BinPack C4 Encoder Diagram" /></p>

<p>The <em>Encoder</em> defines a proxy serialization procedure that given a JSON
document and a matching <em>Encoding Schema</em>, serializes the JSON document into a
bit-string using the specific encoding implementation declared by the <em>Encoding
Schema</em>. The deserialization process mirrors the serialization process through
a proxy deserialization procedure that deserializes a bit-string into a JSON
document using the specific encoding implementation declared by the Encoding
Schema.</p>

<h2 id="mapper">Mapper</h2>

<p>The <em>Mapper</em> component is the bridge between a <em>Canonical JSON Schema</em> produced
by the <em>Canonicalizer</em> component and an <em>Encoding Schema</em> consumed by the
<em>Encoder</em> component. The Mapper statically analyses the input <em>Canonical JSON
Schema</em> and deterministically computes which encodings and respective encoding
parameters defined by the Encoder are likely to produce the most
space-efficient bit-strings for any JSON instance that successfully validates
against the given schema.</p>

<p><img src="https://www.jsonbinpack.org/assets/images/c4-jsonbinpack-mapper.png" alt="JSON BinPack C4 Mapper Diagram" /></p>

      </article>
    </main>
  </div>
</div>



<div class="container-fluid px-5 mt-2 mt-lg-5">

  <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
    <a href="https://www.jsonbinpack.org" class="col-12 col-md-6 d-flex align-items-center justify-content-center justify-content-md-start mb-3 mb-md-0 me-md-auto link-dark text-decoration-none">
      <img src="https://www.jsonbinpack.org/icon.svg" alt=" logo" width="40" height="40">
    </a>

    <ul class="col-12 col-md-6 nav justify-content-center justify-content-md-end">
      <li class="nav-item"><a class="nav-link px-2 text-muted" href="https://github.com/jviotti/jsonbinpack">GitHub</a></li>
      <li class="nav-item"><a class="nav-link px-2 text-muted" href="https://github.com/jviotti/jsonbinpack/discussions">Discussions</a></li>
      <li class="nav-item"><a class="nav-link px-2 text-muted" href="/docs/architecture">Docs</a></li>
      <li class="nav-item"><a class="nav-link px-2 text-muted" href="https://github.com/jviotti/jsonbinpack/issues">Issues</a></li>
      <li class="nav-item"><a class="nav-link px-2 text-muted" href="https://twitter.com/sourcemeta">Twitter</a></li>
    </ul>
  </footer>
</div>


<script src="https://www.jsonbinpack.org/assets/bundle.js"></script>

  </body>
</html>
